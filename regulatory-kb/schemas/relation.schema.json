{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "relation.schema.json",
  "title": "Inter-Document Relation",
  "description": "Schema for relations between regulatory documents",
  "type": "object",
  "required": ["source_id", "relation_type", "target_id"],
  "properties": {
    "source_id": {
      "type": "string",
      "description": "Identifier of the source document"
    },
    "source_type": {
      "type": "string",
      "enum": ["enforcement-action", "guideline", "directive", "regulation"],
      "description": "Document type of the source"
    },
    "relation_type": {
      "type": "string",
      "enum": ["ENFORCES", "IMPLEMENTS", "AMENDS", "SUPPLEMENTS", "REPEALS", "REFERENCES", "AFFECTS_PROCESS", "ISSUED_BY", "TARGETS", "SUPERSEDES"],
      "description": "Type of relation"
    },
    "target_id": {
      "type": "string",
      "description": "Identifier of the target document or entity"
    },
    "target_type": {
      "type": "string",
      "enum": ["regulation", "eu_regulation", "directive", "guideline", "enforcement-action", "process", "authority", "entity"],
      "description": "Type of the target"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Confidence score for auto-extracted relations"
        },
        "extracted_by": {
          "type": "string",
          "enum": ["manual", "crawler", "analysis_engine"],
          "description": "How this relation was created"
        },
        "notes": {
          "type": "string"
        }
      }
    }
  }
}
